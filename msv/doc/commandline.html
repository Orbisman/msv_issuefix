<HTML>
<HEAD>
	<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=iso-8859-1">
	<TITLE>Usage Guide For Sun's Multi-Schema Validator</TITLE>
	<style>
		.title
		{
			text-align:center;
			font-weight:bold;
		}
		LI
		{
			margin-top: 1em;
		}
		PRE
		{
			background-color: rgb(240,240,240);
		}
	</style>
</HEAD>
<BODY>
<P ALIGN=center>
<B>USAGE GUIDE FOR SUN'S MULTI-SCHEMA VALIDATOR<BR>
Preview Version.1 April,2001<BR><BR>Copyright &copy; Sun
Microsystems, 2001</B></P>
<P><BR></P>
<P ALIGN=right>Document written by <A href="mailto:kohsuke.kawaguchi@eng.sun.com">Kohsuke KAWAGUCHI</A> <BR>
$Id$ 
</P>
<P>Sun's Multi-Schema Validator(MSV) is  a Java tool to validate XML documents against XML schemata. It supports RELAX Namespace, RELAX Core, TREX, XML DTDs, and a subset of XML Schema Part 1.</P>

<H1>Usage</H1>
<P>
  To validate XML documents with a RELAX grammar/module, do as follows
</P>
<PRE>$ java -jar msv.jar MySchema.rxg MyDocument1.xml MyDocument2.xml ...</PRE>
<P>
  If you'd like to use TREX,
</P>
<PRE>$ java -jar msv.jar MySchema.trex MyDocument1.xml MyDocument2.xml</PRE>
<P>
  Or if you'd like to use XML Schema,
</P>
<PRE>$ java -jar msv.jar MySchema.xsd MyDocument1.xml MyDocument2.xml</PRE>
<P>
  MSV will detect the schema language regardless of its file extension.
</P>
<P>
  However, you have to add <code>-dtd</code> switch to use DTD.
</P>
<PRE>$ java -jar msv.jar -dtd my.dtd MyDocument1.xml MyDocument2.xml</PRE>
<P>
  Some environment supports wild card for filenames, while others don't
  (e.g., "jview" VM from Microsoft).
  You can also use URL instead of filename. 
</P>
<P>
  If the schema contains errors, you will see messages like this.
</P>
<PRE>
start parsing a grammar.
the following hedgeRules form an infinite recursion ( y &gt; z &gt; y )
  18:23@file:///c:/work/relax/relax024.e.rlx
  14:23@file:///c:/work/relax/relax024.e.rlx
failed to load a grammar.
</PRE>
<P>"18:23@XYZ" indicates that the error is located at line 18, column 23 of file XYZ.</P>
<P>If the document is valid, you will see messages like this.</P>
<PRE>
start parsing a grammar.
validating c:\work\relax\relax001.v00.xml
the document is valid.
</PRE>
<P>
	Alternatively, if the document has errors, you will see messages like this.
</P>
<PRE>
start parsing a grammar.
validating c:\work\relax\relax001.n02.xml
Error at line:5, column:5 of file:///c:/work/relax/relax001.n02.xml
  tag name "q" is not allowed. possible tag names are:

the document is NOT valid.
</PRE>
<P>Please note that line/column infomation is sometimes 
inaccurate, and one tab char is counted as one character, not 4 or 8. So you 
might want to look around to find the actual error.</P>


<H1>Options</H1>
<P>Command line tool has several other options. You can see the list of 
available options by invoking MSV without any arguments.</P>
<PRE>$ java -jar msv.jar</PRE>

<DL>
	<DT>-warning</DT>
	<DD>
		Display all warning messages. Warnings are useful
		to catch potential errors.
	</DD>
	<DT>-loose</DT>
	<DD>
		This switch prevents MSV from resolving external resources
		(such as external DTD referenced from documents, or external entities).
	</DD>
</DL>


<H1>Known Limitations</H1>

<H2>DTD</H2>
<OL>
	<LI>
		Attribute declarations in the form of <code>xmlns:***</code> are
		ignored. All namespce declarations within the instance document
		are also ignored.
	</LI>
	<LI>
		In general, handling of XML namespace is different from
		most DTD validators. As a result, MSV may validate documents
		that other DTD validators reject. When this is the case,
		MSV always issues a warning.
	</LI>
</OL>

<H2>TREX</H2>
<P>
	This implementation fully conforms to
	<a href="http://thaiopensource.com/trex/spec.html">
		the current specification (2001-02-13 version).
	</a>
</P>

<H2>RELAX Core</H2>
<P>
	This implementation fully conforms to the current JIS TR specification.
	(
	<a href="http://www.egroups.co.jp/files/reldeve/JISTRtranslation.pdf">
		English
	</a>,
	<a href="http://www.y-adagio.com/public/standards/tr_relax_c/toc.htm">
		Japanese
	</a>
	)
</P>

<H2>RELAX Namespace</H2>
<OL>
	<LI>
		&lt;anyOtherAttribute&gt; is not implemented.
	</LI>
</OL>

<H2>XML Schema Part 1</H2>
<OL>
	<LI>
		<A href="http://www.w3.org/TR/xmlschema-1/#concepts-schemaConstraints">
		"Schema component constraints" and "Schema representation constraints"
		</A> are not fully enforced. In other words, MSV accepts schemata
		that are rejected by other conforming processors.
	</LI>
	<LI>
		<A href="http://www.w3.org/TR/xmlschema-1/#cIdentity-constraint_Definitions">"Identity constraints"</A> are not implemented.
		key, keyref and unique declarations are ignored and no check
		is performed.
	</LI>
	<LI>
		Forward reference of <A href="http://www.w3.org/TR/xmlschema-1/#Simple_Type_Definitions">simple type</A> is not supported. Therefore, the following schema cannot be used.
		<PRE><XMP>
<xs:simpleType name="foo">
 <xs:restriction base="bar">
  <xs:fractionDigits value="2"/>
 </xs:restriction>
</xs:simpleType>

<xs:simpleType name="bar">
 <xs:restriction base="xs:decimal">
  <xs:totalDigits value="5" />
 </xs:restriction>
</xs:simpleType>
		</XMP></PRE>
	</LI>
	<LI>
		<A href="http://www.w3.org/TR/xmlschema-1/#conformance-missing">
		"Missing sub-components" </A> are treated as immediate error.
		This behavior better serves the majority of users.
	</LI>
	<LI>
		Default values are ignored. In fact,
		no infoset contribution is supported: MSV validates documents,
		but it doesn't augment them. PSVI is also not supported.
	</LI>
</OL>


<H1>Further Readings</H1>
<P>To learn RELAX,&nbsp;<A href="http://www.xml.gr.jp/relax/">"How to RELAX"</A> 
is a good starter. To learn TREX, there is <A 
href="http://thaiopensource.com/trex/tutorial.html">"TREX tutorial"</A>. For XML 
Schema Part 2, see <A 
href="http://www.w3.org/TR/2001/PR-xmlschema-0-20010316/#CreatDt">section 
2.3&nbsp;of XML Schema Part 0: Primer</A></P>
<P>&nbsp;</P></BODY></HTML>
